% Listing style definition for the Lean Theorem Prover.
% Defined by Jeremy Avigad, 2015, by modifying Assia Mahboubi's SSR style.
% Unicode replacements taken from Olivier Verdier's unixode.sty

\lstdefinelanguage{lean} {

% Anything between $ becomes LaTeX math mode
mathescape=false,
% Comments may or not include Latex commands
texcl=false,

% keywords, list taken from lean-syntax.el
morekeywords=[1]{
import, prelude, protected, private, noncomputable, definition, meta, renaming,
hiding, parameter, parameters, begin, constant, constants,
lemma, variable, variables, theory,
print, theorem, example,
open, as, export, override, axiom, axioms, inductive, with,
structure, record, universe, universes,
alias, help, precedence, reserve, declare_trace, add_key_equivalence,
match, infix, infixl, infixr, notation, postfix, prefix, instance,
eval, reduce, check, end, this,
using, using_well_founded, namespace, section,
attribute, local, set_option, extends, include, omit, class,
raw, replacing,
calc, have, show, suffices, by, in, at, let, forall, Pi, fun,
exists, if, dif, then, else, assume, obtain, from, register_simp_ext, unless, break, continue,
mutual, do, def, run_cmd, const,
partial, mut, where, macro, syntax, deriving,
return, try, catch, for, macro_rules, declare_syntax_cat, abbrev},

% Sorts
morekeywords=[2]{Sort, Type, Prop},

% tactics, list taken from lean-syntax.el
morekeywords=[3]{
assumption,
apply, intro, intros, allGoals,
generalize, clear, revert, done, exact,
refine, repeat, cases, rewrite, rw,
simp, simp_all, contradiction,
constructor, injection,
induction,
},

% modifiers, taken from lean-syntax.el
% note: 'otherkeywords' is needed because these use a different symbol.
% this command doesn't allow us to specify a number -- they are put with [1]
% otherkeywords={
% [persistent], [notation], [visible], [instance], [trans_instance],
% [class], [parsing-only], [coercion], [unfold_full], [constructor],
% [reducible], [irreducible], [semireducible], [quasireducible], [wf],
% [whnf], [multiple_instances], [none], [decl], [declaration],
% [relation], [symm], [subst], [refl], [trans], [simp], [congr], [unify],
% [backward], [forward], [no_pattern], [begin_end], [tactic], [abbreviation],
% [reducible], [unfold], [alias], [eqv], [intro], [intro!], [elim], [grinder],
% [localrefinfo], [recursor]
% },

% Various symbols
literate=
{Œ±}{{\ensuremath{\mathrm{\upalpha}}}}1
{Œ≤}{{\ensuremath{\mathrm{\upbeta}}}}1
{Œ≥}{{\ensuremath{\mathrm{\upgamma}}}}1
{Œ¥}{{\ensuremath{\mathrm{\updelta}}}}1
{Œµ}{{\ensuremath{\mathrm{\varepsilon}}}}1
{Œ∂}{{\ensuremath{\mathrm{\zeta}}}}1
{Œ∑}{{\ensuremath{\mathrm{\eta}}}}1
{Œ∏}{{\ensuremath{\mathrm{\theta}}}}1
{Œπ}{{\ensuremath{\mathrm{\iota}}}}1
{Œ∫}{{\ensuremath{\mathrm{\kappa}}}}1
{Œº}{{\ensuremath{\mathrm{\mu}}}}1
{ŒΩ}{{\ensuremath{\mathrm{\nu}}}}1
{Œæ}{{\ensuremath{\mathrm{\xi}}}}1
{œÄ}{{\ensuremath{\mathrm{\mathnormal{\pi}}}}}1
{œÅ}{{\ensuremath{\mathrm{\rho}}}}1
{œÉ}{{\ensuremath{\mathrm{\sigma}}}}1
{œÑ}{{\ensuremath{\mathrm{\tau}}}}1
{œÜ}{{\ensuremath{\mathrm{\varphi}}}}1
{œá}{{\ensuremath{\mathrm{\chi}}}}1
{œà}{{\ensuremath{\mathrm{\psi}}}}1
{œâ}{{\ensuremath{\mathrm{\omega}}}}1
{œñ}{{\ensuremath{\mathrm{\mathnormal{\varpi}}}}}1 % KMB added for perfectoid stuff

{Œì}{{\ensuremath{\mathrm{\Gamma}}}}1
{Œî}{{\ensuremath{\mathrm{\Delta}}}}1
{Œò}{{\ensuremath{\mathrm{\Theta}}}}1
{Œõ}{{\ensuremath{\mathrm{\Lambda}}}}1
{Œ£}{{\ensuremath{\mathrm{\Sigma}}}}1
{Œ¶}{{\ensuremath{\mathrm{\Phi}}}}1
{Œû}{{\ensuremath{\mathrm{\Xi}}}}1
{Œ®}{{\ensuremath{\mathrm{\Psi}}}}1
{Œ©}{{\ensuremath{\mathrm{\Omega}}}}1

{‚Ñµ}{{\ensuremath{\aleph}}}1

{‚â§}{{\color{symbolcolor}\ensuremath{\leq}}}1
{‚â•}{{\color{symbolcolor}\ensuremath{\geq}}}1
{‚â†}{{\color{symbolcolor}\ensuremath{\neq}}}1
{‚âà}{{\color{symbolcolor}\ensuremath{\approx}}}1
{‚â°}{{\color{symbolcolor}\ensuremath{\equiv}}}1
{‚âÉ}{{\color{symbolcolor}\ensuremath{\simeq}}}1

{‚àÇ}{{\color{symbolcolor}\ensuremath{\partial}}}1
{‚àÜ}{{\color{symbolcolor}\ensuremath{\triangle}}}1 % or \laplace?

{‚à´}{{\color{symbolcolor}\ensuremath{\int}}}1
{‚àë}{{\color{symbolcolor}\ensuremath{\mathrm{\Sigma}}}}1
%{Œ†}{{\ensuremath{\mathrm{\Pi}}}}1

{‚ä•}{{\color{symbolcolor}\ensuremath{\perp}}}1
{‚ä§}{{\color{symbolcolor}\ensuremath{\top}}}1
{‚àû}{{\color{symbolcolor}\ensuremath{\infty}}}1
{‚àÇ}{{\color{symbolcolor}\ensuremath{\partial}}}1

{‚àì}{{\color{symbolcolor}\ensuremath{\mp}}}1
{¬±}{{\color{symbolcolor}\ensuremath{\pm}}}1
{√ó}{{\color{symbolcolor}\ensuremath{\times}}}1

{‚äï}{{\color{symbolcolor}\ensuremath{\oplus}}}1
{‚äó}{{\color{symbolcolor}\ensuremath{\otimes}}}1
{‚äû}{{\color{symbolcolor}\ensuremath{\boxplus}}}1

{‚àá}{{\color{symbolcolor}\ensuremath{\nabla}}}1
{‚àö}{{\color{symbolcolor}\ensuremath{\sqrt}}}1

{‚¨ù}{{\color{symbolcolor}\ensuremath{\cdot}}}1
{‚Ä¢}{{\color{symbolcolor}\ensuremath{\cdot}}}1
{‚àò}{{\color{symbolcolor}\ensuremath{\circ}}}1
{·µí}{{\color{symbolcolor}\ensuremath{^\circ}}}1
{`}{{\ensuremath{{}^\backprime}}}1
{'}{{\ensuremath{{}^\prime}}}1

%{‚Åª}{{\ensuremath{^{\textup{\kern1pt\rule{2pt}{0.3pt}\kern-1pt}}}}}1
{‚Åª}{{\ensuremath{^{-}}}}1
{‚ñ∏}{{\ensuremath{\blacktriangleright}}}1

{‚àß}{{\color{symbolcolor}\ensuremath{\wedge}}}1
{‚à®}{{\color{symbolcolor}\ensuremath{\vee}}}1
{¬¨}{{\color{symbolcolor}\ensuremath{\neg}}}1
{‚ä¢}{{\color{symbolcolor}\ensuremath{\vdash}}}1

%{‚ü®}{{\ensuremath{\left\langle}}}1
%{‚ü©}{{\ensuremath{\right\rangle}}}1
{‚ü®}{{\ensuremath{\langle}}}1
{‚ü©}{{\ensuremath{\rangle}}}1

{‚Ü¶}{{\color{symbolcolor}\ensuremath{\mapsto}}}1
{‚Üí}{{\color{symbolcolor}\ensuremath{\rightarrow}}}1
{‚Üê}{{\color{symbolcolor}\ensuremath{\leftarrow}}}1
{‚Üî}{{\color{symbolcolor}\ensuremath{\leftrightarrow}}}1
{‚áí}{{\color{symbolcolor}\ensuremath{\Rightarrow}}}1
{‚üπ}{{\color{symbolcolor}\ensuremath{\Longrightarrow}}}1
{‚áê}{{\color{symbolcolor}\ensuremath{\Leftarrow}}}1
{‚ü∏}{{\color{symbolcolor}\ensuremath{\Longleftarrow}}}1

{‚à©}{{\color{symbolcolor}\ensuremath{\cap}}}1
{‚à™}{{\color{symbolcolor}\ensuremath{\cup}}}1
{‚äì}{{\color{symbolcolor}\ensuremath{\sqcap}}}1
{‚äî}{{\color{symbolcolor}\ensuremath{\sqcup}}}1
{‚ãÉ}{{\color{symbolcolor}\ensuremath{\bigcup}}}1
{‚ãÇ}{{\color{symbolcolor}\ensuremath{\bigcap}}}1
{‚àë}{{\color{symbolcolor}\ensuremath{\sum}}}1
{‚®Ö}{{\color{symbolcolor}\ensuremath{\bigsqcap}}}1 % use package MnSymbol to get this symbol. The symbol also exists in stmaryrd but has an incorrect size
{‚®Ü}{{\color{symbolcolor}\ensuremath{\bigsqcup}}}1
{‚äÇ}{{\color{symbolcolor}\ensuremath{\subset}}}1
{‚äÜ}{{\color{symbolcolor}\ensuremath{\subseteq}}}1
{‚äÑ}{{\color{symbolcolor}\ensuremath{\not\subset}}}1
{‚äà}{{\color{symbolcolor}\ensuremath{\nsubseteq}}}1
{‚äÉ}{{\color{symbolcolor}\ensuremath{\supset}}}1
{‚äá}{{\color{symbolcolor}\ensuremath{\supseteq}}}1
{‚äÖ}{{\color{symbolcolor}\ensuremath{\not\supset}}}1
{‚äâ}{{\color{symbolcolor}\ensuremath{\nsupseteq}}}1
{‚àà}{{\color{symbolcolor}\ensuremath{\in}}}1
{‚àâ}{{\color{symbolcolor}\ensuremath{\notin}}}1
{‚àã}{{\color{symbolcolor}\ensuremath{\ni}}}1
{‚àå}{{\color{symbolcolor}\ensuremath{\notni}}}1
{‚àÖ}{{\color{symbolcolor}\ensuremath{\emptyset}}}1

{‚àñ}{{\color{symbolcolor}\ensuremath{\setminus}}}1
{‚Ä†}{{\color{symbolcolor}\ensuremath{\dag}}}1

{‚Ñï}{{\ensuremath{\mathbb{N}}}}1
{‚Ñ§}{{\ensuremath{\mathbb{Z}}}}1
{‚Ñù}{{\ensuremath{\mathbb{R}}}}1
{‚Ñö}{{\ensuremath{\mathbb{Q}}}}1
{‚ÑÇ}{{\ensuremath{\mathbb{C}}}}1
{ùìù}{{\ensuremath{\mathcal{N}}}}1
{ùìü}{{\ensuremath{\mathcal{P}}}}1
{ùí≥}{{\ensuremath{\mathcal{X}}}}1

{‚åû}{{\ensuremath{\llcorner}}}1
{‚åü}{{\ensuremath{\lrcorner}}}1
{‚¶É}{{\ensuremath{\{\!|}}}1
{‚¶Ñ}{{\ensuremath{|\!\}}}}1
{‚à•}{{\ensuremath{\|}}}1

{‚ÇÅ}{{\ensuremath{_1}}}1
{‚ÇÇ}{{\ensuremath{_2}}}1
{‚ÇÉ}{{\ensuremath{_3}}}1
{‚ÇÑ}{{\ensuremath{_4}}}1
{‚ÇÖ}{{\ensuremath{_5}}}1
{‚ÇÜ}{{\ensuremath{_6}}}1
{‚Çá}{{\ensuremath{_7}}}1
{‚Çà}{{\ensuremath{_8}}}1
{‚Çâ}{{\ensuremath{_9}}}1
{‚ÇÄ}{{\ensuremath{_0}}}1
{‚Çê}{{\ensuremath{_a}}}1
{·µ¢}{{\ensuremath{_i}}}1
{‚±º}{{\ensuremath{_j}}}1
{‚Çô}{{\ensuremath{_n}}}1
{‚Çò}{{\ensuremath{_m}}}1
{‚Çñ}{{\ensuremath{_k}}}1
{‚Çú}{{\ensuremath{_t}}}1

{¬π}{{\ensuremath{^1}}}1
{·∂ú}{{\color{symbolcolor}\ensuremath{^c}}}1
{À¢}{{\color{symbolcolor}\ensuremath{^s}}}1
{·µê}{{\color{symbolcolor}\ensuremath{\textsuperscript{m}}}}1
{‚Åª}{{\ensuremath{^{-}}}}1
{·µí·µñ}{{\color{symbolcolor}\textsuperscript{op}}}1
{·∂†}{{\color{symbolcolor}\ensuremath{\textsuperscript{f}}}}1

{‚Üë}{{\color{symbolcolor}\ensuremath{\uparrow}}}1
{‚Üì}{{\color{symbolcolor}\ensuremath{\downarrow}}}1
{‚ü∂}{{\color{symbolcolor}\ensuremath{\longrightarrow}}}1
{‚•§}{{\color{symbolcolor}\ensuremath{\Rightarrow}}}1

{...}{{\ensuremath{\ldots}}}1
{‚ãØ}{{\color{symbolcolor}\ensuremath{\cdots}}}1

{‚åä}{{\ensuremath{\lfloor}}}1
{‚åã}{{\ensuremath{\rfloor}}}1
{‚åà}{{\ensuremath{\lceil}}}1
{‚åâ}{{\ensuremath{\rceil}}}1

{‚áÇ}{{\ensuremath{\downharpoonright}}}1

{‚Äπ}{{\guilsinglleft}}1
{‚Ä∫}{{\guilsinglright}}1

{Œ£}{{\color{symbolcolor}\ensuremath{\Sigma}}}1
{Œ†}{{\color{symbolcolor}\ensuremath{\Uppi}}}1 %\mathrm{\Uppi}
{‚àÄ}{{\color{symbolcolor}\ensuremath{\forall}}}1
{‚àÉ}{{\color{symbolcolor}\ensuremath{\exists}}}1
{Œª}{{\color{symbolcolor}\ensuremath{\uplambda}}}1
{\$}{{\color{symbolcolor}\$}}1

{:}{{\color{symbolcolor}:}}1
{|}{{\color{symbolcolor}|}}1
{=}{{\color{symbolcolor}=}}1
{<}{{\color{symbolcolor}<}}1
{>}{{\color{symbolcolor}>}}1
{<|>}{{\color{symbolcolor}<|>}}1
{+}{{\color{symbolcolor}+}}1
{*}{{\color{symbolcolor}\ensuremath{{}^{*}}}}1
{\#}{{\color{keywordcolor}\#}}1, % is usually part of a keyword, like #check


% Comments
%comment=[s][\itshape \color{commentcolor}]{/-}{-/},
morecomment=[s][\color{commentcolor}]{/-}{-/},
morecomment=[l][\itshape \color{commentcolor}]{--},

% Spaces are not displayed as a special character
showstringspaces=false,

% keep spaces
keepspaces=true,

% String delimiters
morestring=[b]",
morestring=[d]¬í,

% Size of tabulations
tabsize=3,

% Enables ASCII chars 128 to 255
extendedchars=false,

% Case sensitivity
sensitive=true,

% Automatic breaking of long lines
breaklines=true,
breakatwhitespace=true,

% Default style fors listingsred
basicstyle=\ttfamily\small,

% Position of captions is bottom
captionpos=b,

% Full flexible columns
columns=[l]fullflexible,


% Style for (listings') identifiers
identifierstyle={\ttfamily\color{black}},
% Note : highlighting of Coq identifiers is done through a new
% delimiter definition through an lstset at the beginning of the
% document. Don't know how to do better.

% Style for declaration keywords
keywordstyle=[1]{\ttfamily\color{keywordcolor}},

% Style for sorts
keywordstyle=[2]{\ttfamily\color{sortcolor}},

% Style for tactics keywords
keywordstyle=[3]{\ttfamily\color{tacticcolor}},

% Style for attributes
keywordstyle=[4]{\ttfamily\color{attributecolor}},

% Style for strings
stringstyle=\ttfamily,

% Style for comments
commentstyle={\ttfamily\footnotesize },

}